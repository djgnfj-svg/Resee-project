# ğŸš€ Resee AWS ë°°í¬ ê°€ì´ë“œ

> **AWS í™˜ê²½ì— ìµœì í™”ëœ ë°°í¬ ê°€ì´ë“œ** â±ï¸ ì´ 60ë¶„ ì†Œìš”

---

## ğŸ¯ AWS ì¤€ë¹„ë¬¼ (15ë¶„)

### AWS ì„œë¹„ìŠ¤ ì„¤ì •
- [ ] **EC2**: Ubuntu 22.04 LTS ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- [ ] **ALB**: Application Load Balancer (SSL í„°ë¯¸ë„¤ì´ì…˜ìš©)
- [ ] **Route 53**: ë„ë©”ì¸ DNS ê´€ë¦¬ (ì„ íƒì‚¬í•­)
- [ ] **RDS**: PostgreSQL ì¸ìŠ¤í„´ìŠ¤ (ì„ íƒì‚¬í•­, Dockerë„ ê°€ëŠ¥)
- [ ] **ElastiCache**: Redis í´ëŸ¬ìŠ¤í„° (ì„ íƒì‚¬í•­, Dockerë„ ê°€ëŠ¥)

### ì™¸ë¶€ ì„œë¹„ìŠ¤
- [ ] **ë„ë©”ì¸**: ì›í•˜ëŠ” ë„ë©”ì¸ êµ¬ë§¤
- [ ] **Google OAuth**: [Google Console](https://console.cloud.google.com/)ì—ì„œ ì•± ë“±ë¡
- [ ] **AWS SES**: ì´ë©”ì¼ ë°œì†¡ìš© (ë˜ëŠ” Gmail SMTP)

---

## ğŸ”§ 1ë‹¨ê³„: EC2 ì¸ìŠ¤í„´ìŠ¤ ì„¤ì • (20ë¶„)

### EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
```bash
# AMI: Ubuntu 22.04 LTS
# ì¸ìŠ¤í„´ìŠ¤ ìœ í˜•: t3.medium ì´ìƒ ê¶Œì¥
# ë³´ì•ˆ ê·¸ë£¹: HTTP(80), HTTPS(443), SSH(22) í—ˆìš©
```

### SSH ì ‘ì† í›„ í™˜ê²½ ì„¤ì •
```bash
# ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸
sudo apt update && sudo apt upgrade -y

# Docker ì„¤ì¹˜
curl -fsSL https://get.docker.com -o get-docker.sh && sudo sh get-docker.sh
sudo usermod -aG docker ubuntu

# Docker Compose ì„¤ì¹˜
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
sudo apt install -y git htop tree

# ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p /opt/Resee /var/log/resee /backups
sudo chown -R ubuntu:ubuntu /opt/Resee /var/log/resee /backups

echo "âœ… EC2 ì„¤ì • ì™„ë£Œ! í„°ë¯¸ë„ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”."
```

**ğŸ”„ í„°ë¯¸ë„ ì¬ì‹œì‘ ë˜ëŠ” `newgrp docker` ì‹¤í–‰**

---

## ğŸ“¥ 2ë‹¨ê³„: ì†ŒìŠ¤ì½”ë“œ ë‹¤ìš´ë¡œë“œ (5ë¶„)

```bash
# ì†ŒìŠ¤ì½”ë“œ ë‹¤ìš´ë¡œë“œ
cd /opt
sudo git clone https://github.com/your-username/Resee.git  # ë³¸ì¸ ì €ì¥ì†Œ ì£¼ì†Œë¡œ ë³€ê²½
sudo chown -R ubuntu:ubuntu Resee
cd Resee
```

---

## âš™ï¸ 3ë‹¨ê³„: í™˜ê²½ì„¤ì • (15ë¶„) âš ï¸ ê°€ì¥ ì¤‘ìš”!

### í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„±
```bash
# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ë³µì‚¬ ë° ìˆ˜ì •
cp .env.production.example .env.production
nano .env.production
```

### ğŸ“ .env.production íŒŒì¼ì—ì„œ AWSìš©ìœ¼ë¡œ ìˆ˜ì •:

```env
# ğŸ”‘ ë³´ì•ˆ í‚¤ (ë°˜ë“œì‹œ ë³€ê²½!)
SECRET_KEY=django-insecure-ë°”ê¿”ì£¼ì„¸ìš”-50ì-ì´ìƒ-ëœë¤-ë¬¸ìì—´
POSTGRES_PASSWORD=ë°ì´í„°ë² ì´ìŠ¤-ê°•í•œ-ë¹„ë°€ë²ˆí˜¸
RABBITMQ_PASSWORD=í-ê°•í•œ-ë¹„ë°€ë²ˆí˜¸

# ğŸŒ ë„ë©”ì¸ ì„¤ì • (ALB ë„ë©”ì¸ ë˜ëŠ” ë³¸ì¸ ë„ë©”ì¸)
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com,your-alb-xxx.us-east-1.elb.amazonaws.com
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CSRF_TRUSTED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
REACT_APP_API_URL=https://yourdomain.com

# ğŸ”’ SSL/HTTPS ì„¤ì • ì œê±°ë¨ (AWS ALBì—ì„œ ì²˜ë¦¬)
# AWS ALB/CloudFrontì—ì„œ SSL í„°ë¯¸ë„¤ì´ì…˜í•˜ë¯€ë¡œ ì•±ì—ì„œëŠ” HTTP ì‚¬ìš©

# ğŸ” Google OAuth (Google Consoleì—ì„œ ë°œê¸‰ë°›ì€ ê²ƒ)
GOOGLE_OAUTH2_CLIENT_ID=ë³¸ì¸-êµ¬ê¸€-í´ë¼ì´ì–¸íŠ¸-ID
GOOGLE_OAUTH2_CLIENT_SECRET=ë³¸ì¸-êµ¬ê¸€-í´ë¼ì´ì–¸íŠ¸-ì‹œí¬ë¦¿
REACT_APP_GOOGLE_CLIENT_ID=ë³¸ì¸-êµ¬ê¸€-í´ë¼ì´ì–¸íŠ¸-ID

# ğŸ“§ ì´ë©”ì¼ ì„¤ì • (AWS SES ê¶Œì¥)
EMAIL_BACKEND=django_ses.SESBackend
AWS_ACCESS_KEY_ID=ë³¸ì¸-AWS-í‚¤
AWS_SECRET_ACCESS_KEY=ë³¸ì¸-AWS-ì‹œí¬ë¦¿
AWS_SES_REGION_NAME=us-east-1
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# ğŸ¤– AI ê¸°ëŠ¥ (ì„ íƒì‚¬í•­)
ANTHROPIC_API_KEY=ë³¸ì¸-ì•¤íŠ¸ë¡œí”½-API-í‚¤

# ğŸ—„ï¸ ì™¸ë¶€ ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì‹œ (RDS ì‚¬ìš©ì‹œ)
# DATABASE_URL=postgresql://username:password@your-rds-endpoint:5432/resee_production

# ğŸ”„ ì™¸ë¶€ ìºì‹œ ì‚¬ìš©ì‹œ (ElastiCache ì‚¬ìš©ì‹œ)
# REDIS_URL=redis://your-redis-cluster-endpoint:6379/1
# CELERY_RESULT_BACKEND=redis://your-redis-cluster-endpoint:6379/0
```

### ğŸ”‘ ë³´ì•ˆ í‚¤ ìƒì„± ë„êµ¬
```bash
# Django SECRET_KEY ìƒì„±
python3 -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"

# ê°•í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±
openssl rand -base64 32
```

---

## ğŸ”— 4ë‹¨ê³„: AWS ALB ì„¤ì • (15ë¶„)

### Application Load Balancer ìƒì„±
1. **ALB ìƒì„±**: EC2 â†’ Load Balancers â†’ Create Load Balancer
2. **íƒ€ê²Ÿ ê·¸ë£¹**: EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ íƒ€ê²Ÿìœ¼ë¡œ ì„¤ì • (í¬íŠ¸ 80)
3. **SSL ì¸ì¦ì„œ**: AWS Certificate Managerì—ì„œ ë°œê¸‰ í›„ HTTPS ë¦¬ìŠ¤ë„ˆì— ì—°ê²°
4. **í—¬ìŠ¤ì²´í¬**: `/api/health/` ê²½ë¡œë¡œ ì„¤ì •

### Route 53 DNS ì„¤ì • (ì„ íƒì‚¬í•­)
```bash
# ë„ë©”ì¸ì„ ALBë¡œ ì—°ê²°
yourdomain.com â†’ ALB DNS ì´ë¦„ (A record ë˜ëŠ” ALIAS)
www.yourdomain.com â†’ ALB DNS ì´ë¦„ (A record ë˜ëŠ” ALIAS)
```

---

## ğŸš¢ 5ë‹¨ê³„: ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ (20ë¶„)

### Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° ì‹¤í–‰
```bash
cd /opt/Resee

# 1. ì´ë¯¸ì§€ ë¹Œë“œ (5ë¶„)
docker-compose -f docker-compose.production.yml build

# 2. ë°ì´í„°ë² ì´ìŠ¤ ì„œë¹„ìŠ¤ë§Œ ë¨¼ì € ì‹œì‘ (2ë¶„)
docker-compose -f docker-compose.production.yml up -d db redis rabbitmq

# 3. 30ì´ˆ ëŒ€ê¸° í›„ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (3ë¶„)
sleep 30
docker-compose -f docker-compose.production.yml run --rm backend python manage.py migrate
docker-compose -f docker-compose.production.yml run --rm backend python manage.py collectstatic --noinput

# 4. ê´€ë¦¬ì ê³„ì • ìƒì„± (2ë¶„)
docker-compose -f docker-compose.production.yml run --rm backend python manage.py createsuperuser

# 5. ì „ì²´ ì„œë¹„ìŠ¤ ì‹œì‘ (3ë¶„)
docker-compose -f docker-compose.production.yml up -d

# 6. ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker-compose -f docker-compose.production.yml ps
```

### ì‹œìŠ¤í…œ ì„œë¹„ìŠ¤ë¡œ ë“±ë¡ (ìë™ ì¬ì‹œì‘)
```bash
# Docker Compose ì„œë¹„ìŠ¤ ë“±ë¡
sudo tee /etc/systemd/system/resee.service << EOF
[Unit]
Description=Resee Application
Requires=docker.service
After=docker.service

[Service]
Type=oneshot
RemainAfterExit=yes
WorkingDirectory=/opt/Resee
ExecStart=/usr/local/bin/docker-compose -f docker-compose.production.yml up -d
ExecStop=/usr/local/bin/docker-compose -f docker-compose.production.yml down
TimeoutStartSec=0
User=ubuntu

[Install]
WantedBy=multi-user.target
EOF

# ì„œë¹„ìŠ¤ í™œì„±í™”
sudo systemctl daemon-reload
sudo systemctl enable resee.service
sudo systemctl start resee.service
```

---

## âœ… 6ë‹¨ê³„: ë°°í¬ ì™„ë£Œ í™•ì¸ (10ë¶„)

### ALB í—¬ìŠ¤ì²´í¬ í™•ì¸
```bash
# EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì§ì ‘ í™•ì¸
curl http://localhost/api/health/

# ALBë¥¼ í†µí•´ í™•ì¸
curl https://yourdomain.com/api/health/
```

### ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸í•  ê²ƒë“¤
- [ ] **ë©”ì¸ í˜ì´ì§€**: https://yourdomain.com ì ‘ì† í™•ì¸
- [ ] **HTTPS ë¦¬ë‹¤ì´ë ‰ì…˜**: HTTP â†’ HTTPS ìë™ ì „í™˜ í™•ì¸
- [ ] **íšŒì›ê°€ì…**: ì´ë©”ì¼ íšŒì›ê°€ì… í…ŒìŠ¤íŠ¸ 
- [ ] **Google ë¡œê·¸ì¸**: Google OAuth ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
- [ ] **ì½˜í…ì¸  ìƒì„±**: í•™ìŠµ ì½˜í…ì¸  ìƒì„± í…ŒìŠ¤íŠ¸
- [ ] **ë³µìŠµ ê¸°ëŠ¥**: ë³µìŠµ í˜ì´ì§€ ë™ì‘ í™•ì¸
- [ ] **ê´€ë¦¬ì í˜ì´ì§€**: https://yourdomain.com/admin/ ì ‘ì† í™•ì¸

---

## ğŸ”§ ìë™ ë°±ì—… ì„¤ì • (ì„ íƒì‚¬í•­)

### ë°ì´í„°ë² ì´ìŠ¤ ìë™ ë°±ì—…
```bash
# ë°±ì—… ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x scripts/backup_db.sh

# ë§¤ì¼ ìƒˆë²½ 2ì‹œ ìë™ ë°±ì—… ì„¤ì •
crontab -e
# ë‹¤ìŒ ì¤„ ì¶”ê°€:
0 2 * * * /opt/Resee/scripts/backup_db.sh >> /var/log/resee/backup.log 2>&1
```

---

## ğŸš¨ AWS í™˜ê²½ ë¬¸ì œ í•´ê²°

### ALB í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨
```bash
# í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
curl -I http://localhost/api/health/

# nginx ì»¨í…Œì´ë„ˆ ë¡œê·¸ í™•ì¸
docker-compose -f docker-compose.production.yml logs nginx

# ë°±ì—”ë“œ ìƒíƒœ í™•ì¸
docker-compose -f docker-compose.production.yml logs backend
```

### SSL ì¸ì¦ì„œ ë¬¸ì œ (AWS Certificate Manager)
- ACMì—ì„œ ì¸ì¦ì„œ ìƒíƒœ í™•ì¸
- ë„ë©”ì¸ ê²€ì¦ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
- ALB ë¦¬ìŠ¤ë„ˆì— ì¸ì¦ì„œ ì—°ê²° í™•ì¸

### í™˜ê²½ë³€ìˆ˜ ë¬¸ì œ
```bash
# í™˜ê²½ë³€ìˆ˜ íŒŒì¼ í™•ì¸ (ë¯¼ê°ì •ë³´ ì œì™¸)
grep -v -E "(PASSWORD|SECRET|KEY)" .env.production

# ì»¨í…Œì´ë„ˆ í™˜ê²½ë³€ìˆ˜ í™•ì¸
docker-compose -f docker-compose.production.yml exec backend env | grep -v -E "(PASSWORD|SECRET|KEY)"
```

### ì •ì íŒŒì¼ ë¬¸ì œ (CSS/JS ì•ˆ ë¡œë“œ)
```bash
# ì •ì íŒŒì¼ ì¬ìˆ˜ì§‘
docker-compose -f docker-compose.production.yml exec backend python manage.py collectstatic --noinput

# nginx ì„¤ì • í™•ì¸
docker-compose -f docker-compose.production.yml exec nginx nginx -t
```

### RDS ì—°ê²° ë¬¸ì œ (ì™¸ë¶€ DB ì‚¬ìš©ì‹œ)
```bash
# VPC ë³´ì•ˆ ê·¸ë£¹ í™•ì¸ (5432 í¬íŠ¸ ì—´ë ¤ìˆëŠ”ì§€)
# RDS ì—”ë“œí¬ì¸íŠ¸ ì—°ê²° í…ŒìŠ¤íŠ¸
telnet your-rds-endpoint 5432

# Djangoì—ì„œ DB ì—°ê²° í…ŒìŠ¤íŠ¸
docker-compose -f docker-compose.production.yml exec backend python manage.py dbshell
```

---

## ğŸ‰ AWS ë°°í¬ ì™„ë£Œ!

### âœ… ì„±ê³µí•˜ë©´ ì´ëŸ° ê²ƒë“¤ì´ ë™ì‘í•´ì•¼ í•©ë‹ˆë‹¤:
- https://yourdomain.com â†’ ë©”ì¸ í˜ì´ì§€ ë¡œë“œ (ALBë¥¼ í†µí•´)
- HTTP â†’ HTTPS ìë™ ë¦¬ë‹¤ì´ë ‰ì…˜ (ALBì—ì„œ ì²˜ë¦¬)
- íšŒì›ê°€ì…/ë¡œê·¸ì¸ ê¸°ëŠ¥
- Google OAuth ë¡œê·¸ì¸
- ì½˜í…ì¸  ìƒì„± ë° ë³µìŠµ ê¸°ëŠ¥
- ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†
- SSL ì¸ì¦ì„œ ìë™ ê°±ì‹  (AWSì—ì„œ ì²˜ë¦¬)

### ğŸ”„ AWS í™˜ê²½ ì¥ì 
- **ìë™ ìŠ¤ì¼€ì¼ë§**: ALB + Auto Scaling Groupìœ¼ë¡œ íŠ¸ë˜í”½ ëŒ€ì‘
- **ê³ ê°€ìš©ì„±**: Multi-AZ ë°°í¬ë¡œ ì¥ì•  ëŒ€ì‘
- **ê´€ë¦¬í˜• ì„œë¹„ìŠ¤**: RDS, ElastiCacheë¡œ ì¸í”„ë¼ ê´€ë¦¬ ë¶€ë‹´ ê°ì†Œ
- **ë³´ì•ˆ**: AWS IAM, Security Groupsìœ¼ë¡œ ì„¸ë°€í•œ ì ‘ê·¼ ì œì–´
- **ëª¨ë‹ˆí„°ë§**: CloudWatchë¡œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

### ğŸ“Š ì •ê¸° ê´€ë¦¬
- **ì¼ì¼**: CloudWatch ë©”íŠ¸ë¦­ í™•ì¸
- **ì£¼ê°„**: `ls -la /backups/postgresql/` ë°±ì—… í™•ì¸
- **ì›”ê°„**: EC2 ì¸ìŠ¤í„´ìŠ¤ ë³´ì•ˆ ì—…ë°ì´íŠ¸

---

## ğŸš€ ê³ ê¸‰ AWS ì„¤ì • (ì„ íƒì‚¬í•­)

### CloudFront CDN ì¶”ê°€
```bash
# ì •ì  íŒŒì¼ ê°€ì†í™”ë¥¼ ìœ„í•œ CloudFront ì„¤ì •
# ALBë¥¼ ì˜¤ë¦¬ì§„ìœ¼ë¡œ í•˜ëŠ” CloudFront ë°°í¬ ìƒì„±
```

### Auto Scaling ì„¤ì •
```bash
# EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ AMIë¡œ ë§Œë“¤ì–´ Auto Scaling Group êµ¬ì„±
# íŠ¸ë˜í”½ì— ë”°ë¥¸ ìë™ ìŠ¤ì¼€ì¼ë§ ì„¤ì •
```

### ëª¨ë‹ˆí„°ë§ ê°•í™”
```bash
# CloudWatch ì•ŒëŒ ì„¤ì •
# - CPU ì‚¬ìš©ë¥  80% ì´ìƒ
# - ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  80% ì´ìƒ  
# - ALB ì‘ë‹µ ì‹œê°„ 5ì´ˆ ì´ìƒ
# - 5xx ì—ëŸ¬ ë°œìƒ ì‹œ
```

---

**ğŸš€ ì´ì œ Reseeê°€ AWS í”„ë¡œë•ì…˜ì—ì„œ ì•ˆì „í•˜ê³  í™•ì¥ ê°€ëŠ¥í•˜ê²Œ ì‹¤í–‰ë©ë‹ˆë‹¤!**

> ğŸ’¡ **AWS ë°°í¬ì˜ í•µì‹¬**: SSLì€ ALBì—ì„œ, í™•ì¥ì„±ì€ Auto Scalingìœ¼ë¡œ, ê´€ë¦¬ëŠ” AWS ì„œë¹„ìŠ¤ë¡œ!