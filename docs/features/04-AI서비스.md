# AI 서비스

## 📌 핵심 개념

**Anthropic Claude API**를 활용하여 콘텐츠 품질 검증, 답안 자동 채점, 문제 자동 생성을 수행합니다.
목적에 따라 최적화된 모델을 사용하여 비용과 성능의 균형을 맞췄습니다.

## ✨ 주요 기능

### 1. 콘텐츠 검증 (Claude 3.5 Sonnet)
- 사실 정확성, 논리 일관성, 제목 관련성 평가
- 각 항목 0-100점, 모두 70점 이상 → 통과

### 2. 답안 평가 (Claude 3 Haiku)
- 주관식 답안 자동 채점 (0-100점)
- 스팸/무의미 답안 자동 탐지 → 0점
- 한국어 피드백 제공

### 3. 문제 생성 (Claude 3 Haiku)
- 객관식 (4지선다) 또는 O/X 문제 자동 생성
- 콘텐츠 기반 맞춤형 문제 출제

## 🔄 동작 흐름

```
[콘텐츠 검증]
사용자 입력 → AI 분석 → 3가지 점수 → 통과/실패

[답안 평가]
사용자 답안 → AI 채점 → 점수 + 피드백 → 70점 이상 "기억함"

[문제 생성]
콘텐츠 선택 → AI 문제 생성 → 주간 시험 등록
```

## 🔗 관련 API

- `POST /api/contents/` - 콘텐츠 생성 시 AI 검증
- `POST /api/review/complete/` - 복습 제출 시 AI 평가
- `POST /api/weekly-test/` - 시험 생성 시 AI 문제 생성

## 📁 관련 파일

- `backend/content/ai_validation.py` - 콘텐츠 검증
- `backend/review/ai_evaluation.py` - 답안 평가
- `backend/weekly_test/ai_service.py` - 문제 생성

## 💡 사용 모델

```python
# 목적별 최적화된 모델 선택
MODELS = {
    'validation': 'claude-3-5-sonnet-20241022',  # 고정밀 검증
    'evaluation': 'claude-3-haiku-20240307',     # 비용 효율
    'generation': 'claude-3-haiku-20240307'      # 빠른 생성
}

# Singleton 패턴으로 API 호출 최소화
ai_evaluator = AIAnswerEvaluator()
```

## ⚙️ 설정

```bash
# .env 파일
ANTHROPIC_API_KEY=sk-ant-api...  # 필수
```
