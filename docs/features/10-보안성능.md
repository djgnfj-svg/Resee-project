# ë³´ì•ˆ & ì„±ëŠ¥

## ğŸ“Œ í•µì‹¬ ê°œë…

**Redis ê¸°ë°˜ Rate Limiting**ê³¼ **í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”**ë¡œ ë³´ì•ˆê³¼ ì„±ëŠ¥ì„ ë™ì‹œì— í™•ë³´í–ˆìŠµë‹ˆë‹¤.
ì•…ì˜ì ì¸ ìš”ì²­ì„ ì°¨ë‹¨í•˜ê³ , ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### ë³´ì•ˆ
- **Redis Rate Limiting**:
  - ìµëª…: 100 req/hr
  - ì¸ì¦: 1000 req/hr
  - ë¡œê·¸ì¸: 5 req/min
  - íšŒì›ê°€ì…: 3 req/min
- **ë³´ì•ˆ í—¤ë”**:
  - XSS Protection
  - HSTS (max-age: 31536000)
  - X-Frame-Options: DENY
  - Content-Type-Nosniff
- **CSRF ë³´í˜¸**: ìƒíƒœ ë³€ê²½ ìš”ì²­ì— í† í° í•„ìˆ˜

### ì„±ëŠ¥
- **í”„ë¡ íŠ¸ì—”ë“œ**:
  - React.lazy ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… (21 í˜ì´ì§€)
  - Tree shaking (ë²ˆë“¤ í¬ê¸° ìµœì†Œí™”)
  - 254kB ë©”ì¸ ë²ˆë“¤ + 27 lazy chunks
- **ë°±ì—”ë“œ**:
  - DB ì¸ë±ì‹± (ReviewSchedule: 3ê°œ, ReviewHistory: 4ê°œ)
  - select_related/prefetch_related
  - ìºì‹± (Redis + locmem)

## ğŸ”„ ë™ì‘ íë¦„

```
[Rate Limiting]
1. ìš”ì²­ ìˆ˜ì‹ 
   â†“
2. Redisì—ì„œ IP/ì‚¬ìš©ìë³„ ìš”ì²­ íšŸìˆ˜ í™•ì¸
   â†“
3. ì œí•œ ì´ˆê³¼ ì‹œ 429 ì—ëŸ¬ ë°˜í™˜
   ì´ˆê³¼í•˜ì§€ ì•Šìœ¼ë©´ ìš”ì²­ ì²˜ë¦¬
   â†“
4. Redis ì¹´ìš´í„° ì¦ê°€

[ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…]
1. ì‚¬ìš©ìê°€ í˜ì´ì§€ ì ‘ì†
   â†“
2. í•´ë‹¹ í˜ì´ì§€ chunkë§Œ ë¡œë“œ
   â†“
3. LoadingFallback í‘œì‹œ
   â†“
4. í˜ì´ì§€ ë Œë”ë§
```

## ğŸ”— ê´€ë ¨ ì„¤ì •

```python
# Rate Limiting
REST_FRAMEWORK = {
    'DEFAULT_THROTTLE_CLASSES': [
        'resee.throttling.RedisAnonRateThrottle',
        'resee.throttling.RedisUserRateThrottle',
    ]
}

# í”„ë¡ íŠ¸ì—”ë“œ (package.json)
{
  "sideEffects": ["*.css"],  # Tree shaking
}
```

## ğŸ“ ê´€ë ¨ íŒŒì¼

- `backend/resee/throttling.py` - Redis Rate Limiting
- `backend/resee/middleware.py` - ë³´ì•ˆ í—¤ë”
- `frontend/src/App.tsx` - React.lazy ì„¤ì •
- `frontend/src/components/LoadingFallback.tsx` - ë¡œë”© UI

## ğŸ’¡ ì„±ëŠ¥ ì§€í‘œ

```
ë²ˆë“¤ í¬ê¸°:
- ë©”ì¸: 254kB (gzip)
- Lazy chunks: 27ê°œ

DB ì¸ë±ìŠ¤:
- ReviewSchedule: user+date, date, user+active
- ReviewHistory: user+date, content, score
- Content: author+date, category+date

ìºì‹œ:
- Redis: Rate limiting (50 connections)
- locmem: ì¼ë°˜ ìºì‹œ (5000 entries)
```
